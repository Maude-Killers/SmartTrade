@page "/wishlist"
@inject HttpClient Http
@inject NavigationManager nav


<PageTitle>Lista de Deseos</PageTitle>

<CabeceraList />

@foreach (var item in listProducts)
{
	<ItemList ProductImage="" ProductName="@item.Product.Name" Price="@item.Product.Price.ToString()" />
}

@code {
    private List<ListProduct> listProducts = new List<ListProduct>();

    [Parameter]
    public int List_Code { get; set; }

    protected override async void OnInitialized()
    {

        //listProducts = await Http.GetFromJsonAsync<List<ListProduct>>($"List/{List_Code}/Wproducts") ?? new List<ListProduct>();

        var request = new HttpRequestMessage(HttpMethod.Get, $"List /{ List_Code } / Wproducts");

        request.SetBrowserRequestCredentials(BrowserRequestCredentials.Include);
        var result = await Http.SendAsync(request);
        listProducts = await result.Content.ReadFromJsonAsync<List<ListProduct>>();
    }
}

