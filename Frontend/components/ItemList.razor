@inject ProductService service;
@inject ListService ListService;
@inject NavigationManager nav;

<NavLink href="@($"/product/{product.Product_code}")">
	<tr class="bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600">
		<td class="p-4" style="max-height: 70px;">
			<img src="@product.Images.First()" class="w-12 h-12 md:w-32 md:h-32 max-w-full max-h-full"
				alt="Apple Watch">
		</td>
		<td class="px-6 py-4 font-semibold text-gray-900 dark:text-white">
			@product.Name
		</td>
		<td class="px-6 py-4 font-semibold text-gray-900 dark:text-white">
			@product.Price
		</td>
		<td class="px-6 py-4">
			<button href="#" class="font-medium text-red-600 dark:text-red-500 hover:underline"
				@onclick="DeleteProduct">Remove</button>
		</td>
	</tr>
</NavLink>

@code {
	[Parameter]
	public Product product { get; set; } = new Product();

	protected override async Task OnInitializedAsync()
	{
		product = await service.GetProductAsync(product.Product_code);
		StateHasChanged();
	}


	public async void DeleteProduct()
	{
		await ListService.DeleteProductFromWishList(product.Product_code);
		nav.NavigateTo("/login");
		nav.NavigateTo("/wishlist");
	}
}