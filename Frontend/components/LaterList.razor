@inject HttpClient Http
@inject NavigationManager nav
@inject ListService ListService;
@inject NavigationManager nav

<main class="flex flex-col justify-center">
    <article class="max-h-lg grid grid-cols-2 md:grid-cols-4 gap-4 items-center justify-items-center">
		@foreach(var product in listProducts)
		{
			<ProductCard product="product" showPrice="true" fromLater="true" />
		}
	</article>
</main>


@code {
	private List<ProductDTO> listProducts = new List<ProductDTO>();

	protected override async void OnInitialized()
	{
		var request = new HttpRequestMessage(HttpMethod.Get, "laterlist");

		request.SetBrowserRequestCredentials(BrowserRequestCredentials.Include);
		var result = await Http.SendAsync(request);
		listProducts = await result.Content.ReadFromJsonAsync<List<ProductDTO>>() ?? new List<ProductDTO>();
		StateHasChanged();
	}
}